<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ผลการวิเคราะห์ PCA</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Orbitron:700&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='plot.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>ผลการวิเคราะห์ PCA ของข้อมูลเมาส์</h1>
    {% if error %}
      <div style="color:red;font-weight:bold;">{{ error }}</div>
    {% endif %}
    {% if debug_html %}
      <div class="card" style="margin-bottom:32px;">{{ debug_html|safe }}</div>
    {% endif %}
    {% if result_table_html %}
      <div class="card" style="margin-bottom:32px;">{{ result_table_html|safe }}</div>
    {% endif %}
    <p id="description">กราฟนี้แสดงการกระจายของเมาส์ต่างๆ โดยใช้ 2 แกนคุณลักษณะหลัก</p>
    <div id="myDiv" style="width:100%; max-width: 900px; height:600px;"></div>

    <h2 id="h2">ตารางข้อมูลรายละเอียด</h2>
    <table>
        <thead>
            <tr>
                <th>Model</th><th>Brand</th><th>PC1</th><th>PC2</th><th>Distance to Ideal</th>
            </tr>
        </thead>
        <tbody>
            {% for row in table_rows %}
            <tr>
                <td>{{ row.Model }}</td>
                <td>{{ row.Brand }}</td>
                <td>{{ "%.4f"|format(row.PC1) }}</td>
                <td>{{ "%.4f"|format(row.PC2) }}</td>
                <td>{{ "%.4f"|format(row.Distance_to_Ideal) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <script id="data-by-brand" type="application/json">
        {{ data_by_brand_json | tojson }}
    </script>
    <script id="ideal-profile" type="application/json">
        {{ ideal_profile_json | tojson }}
    </script>

    <script src="{{ url_for('static', filename='plot.js') }}" defer></script>
</body>
</html>